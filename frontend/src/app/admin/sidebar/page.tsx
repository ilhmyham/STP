"use client"; // tambahkan ini di atas karena kita menggunakan hook client-side

import React from "react";
import Image from "next/image";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { myAppHook } from "@/app/context/AppProviders";

const menuItems = [
  {
    href: "/admin",
    label: "Dashboard",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="26"
        height="26"
        viewBox="0 0 26 26"
        fill="none"
      >
        <path
          d="M4.33337 20.5833V10.8333C4.33337 10.4902 4.41029 10.1652 4.56412 9.85829C4.71796 9.55135 4.92993 9.29857 5.20004 9.09996L11.7 4.22496C12.0792 3.93607 12.5125 3.79163 13 3.79163C13.4875 3.79163 13.9209 3.93607 14.3 4.22496L20.8 9.09996C21.0709 9.29857 21.2832 9.55135 21.437 9.85829C21.5909 10.1652 21.6674 10.4902 21.6667 10.8333V20.5833C21.6667 21.1791 21.4544 21.6894 21.0297 22.114C20.605 22.5387 20.0952 22.7507 19.5 22.75H16.25C15.9431 22.75 15.686 22.646 15.4787 22.438C15.2714 22.23 15.1674 21.9728 15.1667 21.6666V16.25C15.1667 15.943 15.0627 15.6859 14.8547 15.4786C14.6467 15.2713 14.3896 15.1673 14.0834 15.1666H11.9167C11.6098 15.1666 11.3527 15.2706 11.1454 15.4786C10.9381 15.6866 10.8341 15.9437 10.8334 16.25V21.6666C10.8334 21.9736 10.7294 22.231 10.5214 22.439C10.3134 22.647 10.0563 22.7507 9.75004 22.75H6.50004C5.90421 22.75 5.39432 22.538 4.97037 22.114C4.54643 21.6901 4.3341 21.1798 4.33337 20.5833Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
  {
    href: "/admin/users",
    label: "Users",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="26"
        height="26"
        viewBox="0 0 26 26"
        fill="none"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8.66667 4.33334C7.5174 4.33334 6.4152 4.78988 5.60254 5.60254C4.78988 6.4152 4.33333 7.5174 4.33333 8.66667C4.33333 9.81594 4.78988 10.9181 5.60254 11.7308C6.4152 12.5435 7.5174 13 8.66667 13C9.81594 13 10.9181 12.5435 11.7308 11.7308C12.5435 10.9181 13 9.81594 13 8.66667C13 7.5174 12.5435 6.4152 11.7308 5.60254C10.9181 4.78988 9.81594 4.33334 8.66667 4.33334ZM6.5 14.0833C5.35073 14.0833 4.24853 14.5399 3.43587 15.3525C2.62321 16.1652 2.16667 17.2674 2.16667 18.4167V19.5C2.16667 20.0746 2.39494 20.6257 2.80127 21.0321C3.2076 21.4384 3.7587 21.6667 4.33333 21.6667H13C13.5746 21.6667 14.1257 21.4384 14.5321 21.0321C14.9384 20.6257 15.1667 20.0746 15.1667 19.5V18.4167C15.1667 17.2674 14.7101 16.1652 13.8975 15.3525C13.0848 14.5399 11.9826 14.0833 10.8333 14.0833H6.5ZM14.3542 11.8138C14.872 10.8821 15.1667 9.80959 15.1667 8.66667C15.1669 7.5654 14.8873 6.48212 14.3542 5.5185C14.9693 4.93646 15.7415 4.54742 16.5753 4.39945C17.4092 4.25149 18.2681 4.35109 19.0459 4.68595C19.8238 5.0208 20.4864 5.57624 20.952 6.28361C21.4177 6.99098 21.6658 7.81927 21.6658 8.66613C21.6658 9.51299 21.4177 10.3413 20.952 11.0487C20.4864 11.756 19.8238 12.3115 19.0459 12.6463C18.2681 12.9812 17.4092 13.0808 16.5753 12.9328C15.7415 12.7848 14.9693 12.3958 14.3542 11.8138ZM16.7548 21.6667C17.1232 21.0297 17.3344 20.2898 17.3344 19.5V18.4167C17.3364 16.8174 16.7468 15.2739 15.6791 14.0833H19.5C20.6493 14.0833 21.7515 14.5399 22.5641 15.3525C23.3768 16.1652 23.8333 17.2674 23.8333 18.4167V19.5C23.8333 20.0746 23.6051 20.6257 23.1987 21.0321C22.7924 21.4384 22.2413 21.6667 21.6667 21.6667H16.7548Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
  {
    href: "/admin/setting",
    label: "Setting",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="26"
        height="26"
        viewBox="0 0 26 26"
        fill="none"
      >
        <path
          d="M11.7271 23.8333C11.2396 23.8333 10.82 23.6708 10.4683 23.3458C10.1165 23.0208 9.9042 22.6236 9.83125 22.1542L9.5875 20.3667C9.35278 20.2764 9.13178 20.168 8.9245 20.0417C8.71722 19.9153 8.51392 19.7799 8.31458 19.6354L6.63542 20.3396C6.18403 20.5382 5.73264 20.5562 5.28125 20.3937C4.82986 20.2312 4.47778 19.9423 4.225 19.5271L2.95208 17.3062C2.69931 16.891 2.62709 16.4486 2.73542 15.9792C2.84375 15.5097 3.0875 15.1215 3.46667 14.8146L4.90209 13.7312C4.88403 13.6049 4.875 13.4828 4.875 13.3651V12.6338C4.875 12.5168 4.88403 12.3951 4.90209 12.2687L3.46667 11.1854C3.0875 10.8785 2.84375 10.4903 2.73542 10.0208C2.62709 9.55138 2.69931 9.10902 2.95208 8.69374L4.225 6.47291C4.47778 6.05763 4.82986 5.76874 5.28125 5.60624C5.73264 5.44374 6.18403 5.4618 6.63542 5.66041L8.31458 6.36457C8.5132 6.22013 8.72083 6.08471 8.9375 5.95832C9.15417 5.83193 9.37083 5.7236 9.5875 5.63332L9.83125 3.84582C9.90347 3.37638 10.1158 2.97916 10.4683 2.65416C10.8207 2.32916 11.2403 2.16666 11.7271 2.16666H14.2729C14.7604 2.16666 15.1804 2.32916 15.5328 2.65416C15.8853 2.97916 16.0972 3.37638 16.1688 3.84582L16.4125 5.63332C16.6472 5.7236 16.8686 5.83193 17.0766 5.95832C17.2846 6.08471 17.4875 6.22013 17.6854 6.36457L19.3646 5.66041C19.816 5.4618 20.2674 5.44374 20.7188 5.60624C21.1701 5.76874 21.5222 6.05763 21.775 6.47291L23.0479 8.69374C23.3007 9.10902 23.3729 9.55138 23.2646 10.0208C23.1563 10.4903 22.9125 10.8785 22.5333 11.1854L21.0979 12.2687C21.116 12.3951 21.125 12.5172 21.125 12.6349V13.3651C21.125 13.4828 21.1069 13.6049 21.0708 13.7312L22.5063 14.8146C22.8854 15.1215 23.1292 15.5097 23.2375 15.9792C23.3458 16.4486 23.2736 16.891 23.0208 17.3062L21.7208 19.5271C21.4681 19.9423 21.116 20.2312 20.6646 20.3937C20.2132 20.5562 19.7618 20.5382 19.3104 20.3396L17.6854 19.6354C17.4868 19.7799 17.2792 19.9153 17.0625 20.0417C16.8458 20.168 16.6292 20.2764 16.4125 20.3667L16.1688 22.1542C16.0965 22.6236 15.8846 23.0208 15.5328 23.3458C15.1811 23.6708 14.7611 23.8333 14.2729 23.8333H11.7271ZM13.0542 16.7917C14.1014 16.7917 14.9951 16.4215 15.7354 15.6812C16.4757 14.941 16.8458 14.0472 16.8458 13C16.8458 11.9528 16.4757 11.059 15.7354 10.3187C14.9951 9.57846 14.1014 9.20832 13.0542 9.20832C11.9889 9.20832 11.0904 9.57846 10.3588 10.3187C9.62722 11.059 9.26178 11.9528 9.2625 13C9.26322 14.0472 9.62903 14.941 10.3599 15.6812C11.0908 16.4215 11.9889 16.7917 13.0542 16.7917Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
  {
    href: "/logout",
    label: "Logout",
    isLogout: true,
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="22"
        height="22"
        viewBox="0 0 22 22"
        fill="none"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M0 2.35714C0 1.73199 0.248341 1.13244 0.690391 0.690391C1.13244 0.248341 1.73199 0 2.35714 0L13.3571 0C13.9823 0 14.5818 0.248341 15.0239 0.690391C15.4659 1.13244 15.7143 1.73199 15.7143 2.35714V5.40414C15.0767 5.91485 14.663 6.65376 14.5609 7.46429H9.03571C8.5714 7.46429 8.11163 7.55574 7.68265 7.73343C7.25368 7.91111 6.86391 8.17155 6.53559 8.49987C6.20727 8.82819 5.94683 9.21797 5.76914 9.64694C5.59145 10.0759 5.5 10.5357 5.5 11C5.5 11.4643 5.59145 11.9241 5.76914 12.3531C5.94683 12.782 6.20727 13.1718 6.53559 13.5001C6.86391 13.8284 7.25368 14.0889 7.68265 14.2666C8.11163 14.4443 8.5714 14.5357 9.03571 14.5357H14.5609C14.663 15.3462 15.0767 16.0851 15.7143 16.5959V19.6429C15.7143 20.268 15.4659 20.8676 15.0239 21.3096C14.5818 21.7517 13.9823 22 13.3571 22H2.35714C1.73199 22 1.13244 21.7517 0.690391 21.3096C0.248341 20.8676 0 20.268 0 19.6429L0 2.35714ZM17.2276 6.76814C17.0122 6.85735 16.8281 7.00843 16.6986 7.20228C16.5691 7.39612 16.5 7.62402 16.5 7.85714V9.42857H9.03571C8.61895 9.42857 8.21925 9.59413 7.92455 9.88883C7.62985 10.1835 7.46429 10.5832 7.46429 11C7.46429 11.4168 7.62985 11.8165 7.92455 12.1112C8.21925 12.4059 8.61895 12.5714 9.03571 12.5714H16.5V14.1429C16.5002 14.3758 16.5694 14.6035 16.699 14.7971C16.8285 14.9907 17.0125 15.1416 17.2277 15.2307C17.4429 15.3199 17.6797 15.3432 17.9082 15.2978C18.1367 15.2524 18.3466 15.1403 18.5114 14.9757L21.6543 11.8329C21.875 11.6119 21.999 11.3123 21.999 11C21.999 10.6877 21.875 10.3881 21.6543 10.1671L18.5114 7.02429C18.3467 6.85946 18.1368 6.74715 17.9083 6.70156C17.6798 6.65597 17.4429 6.67914 17.2276 6.76814Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
];



export const Sidebar = () => {
  const pathname = usePathname();
  const {logout, authToken} = myAppHook()

  

  return (
    // penambahan attribut fixed untuk menetapkan posisi sidebar
    <aside className="w-64 fixed bg-white shadow-lg px-6 py-8 h-screen ">
      <div className="mb-10 flex justify-center">
        <a href="/admin">
          <Image src="/icons/stp.svg" alt="Logo" width={110} height={62} />
        </a>
      </div>
      <nav className="flex flex-col gap-4 text-[#ADADC0] font-semibold">
        {menuItems.map((item) => (
          <Link key={item.href} href={item.href} onClick={item.isLogout ? logout : undefined} >
            <div
              className={`
                flex items-center gap-2 px-2 py-1 rounded-md cursor-pointer 
                ${pathname === item.href ? " text-black" : ""} 
                ${
                  item.isLogout
                    ? "text-red-500 hover:text-red-700"
                    : "hover:text-black"
                }                
              `}              
             >
              {item.icon}
              {item.label}
            </div>
          </Link>
        ))}
      </nav>
    </aside>
  );
};
